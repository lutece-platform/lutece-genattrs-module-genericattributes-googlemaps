<input type="hidden" id="${entry.idEntry}_map_provider" name="${entry.idEntry}_map_provider" value="${entry.mapProvider.key}"/>
<div class="form-element" id="${entry.idEntry}_waiting" style="display:none;">
 	#i18n{module.genericattributes.googlemaps.loading}
</div>
<div id="${entry.idEntry}_gmap" style="width:45%; height:300px; border:1px solid black;margin:5px 0;"></div>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="js/plugins/genericattributes/modules/googlemaps/genericattributes_gmap.js"></script>
<script type="text/javascript">
		$(document).ready( function (  ) 
		{
			var idEntry = <#if entry.idEntry?has_content>${entry.idEntry}<#else>0</#if>;
		
			<#-- add onChange to set coordinates to ZERO -->
			$("#${entry.idEntry}_address").change( function()
				{
					// set x and y to 0
					document.getElementById(idEntry + "_x").value = 0;
					document.getElementById(idEntry + "_y").value = 0;
				}
			);
		
			$( '#${entry.idEntry}_address' ).keypress( function(event) {
				if (event.keyCode == '13') { // Enter button
				     event.preventDefault(  );
				     $('#${entry.idEntry}_gmap_button').click();
				}
			});
			
			var x = 0;
			var y = 0;
			gmap_genericattributes( x, y, idEntry, "#i18n{module.genericattributes.googlemaps.button_address}" );
		});
</script>
<noscript>#i18n{module.genericattributes.googlemaps.javascript.disabled}</noscript>